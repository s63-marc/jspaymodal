<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" type="image/icon" href="favicon.ico"/>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen,print" href="modal.loader2.css3.css">
    <title>Global Example Shopping: Checkout Form</title>
  </head>
  <body>
    <div class="container">
        <div class="py-5 text-center">
            <img class="d-block mx-auto mb-4" src="logo.png" alt="" height="72">
            <h2>Checkout form</h2>
            <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non mi eget augue fermentum fringilla. Phasellus ut arcu quis libero feugiat elementum quis et mi. Etiam sit amet nulla nibh. Mauris ornare mollis ipsum sit amet mattis. Nulla sed lacus arcu. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
        </div>
        <div class="row">
            <div class="col col-8">
                <h4>Cart</h4>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col" >Item</th>
                            <th scope="col" class="text-center">Volume</th>
                            <th scope="col" class="text-center">Price (USD)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">1</th>
                            <td>Vivamus leo nibh</td>
                            <td class="text-center">1</td>
                            <td class="text-right" style="padding-right: 20px">$12.50</td>
                        </tr>
                        <tr>
                            <th scope="row">2</th>
                            <td>Porta et vestibulum sed</td>
                            <td class="text-center">2</td>
                            <td class="text-right" style="padding-right: 20px">$19.98</td>
                        </tr>
                        <tr>
                            <th scope="row">3</th>
                            <td>varius at magna</td>
                            <td class="text-center">1</td>
                            <td class="text-right" style="padding-right: 20px">$2.25</td>
                        </tr>
                        <tr>
                            <th scope="row">Total (USD)</th>
                            <td></td>
                            <td class="text-center">4</td>
                            <td class="text-right" style="padding-right: 20px">$34.73</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col">
                <ul class="list-group mb-3">
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0">Total Cost</h6>
                            <small class="text-muted">Brief description</small>
                        </div>
                        <span class="text-muted">$34.73</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0">Tax</h6>
                            <small class="text-muted">Brief description</small>
                        </div>
                        <span class="text-muted">$2.43</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0">Shipping</h6>
                            <small class="text-muted">Brief description</small>
                        </div>
                        <span class="text-muted">$0</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between bg-light">
                        <div class="text-success">
                            <h6 class="my-0">Promo code</h6>
                            <small>EXAMPLECODE</small>
                        </div>
                        <span class="text-success">
                            <span>-$2</span>
                        </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between lh-condensed">
                        <div>
                            <h6 class="my-0">Payment Reference</h6>
                            <small class="text-muted"></small>
                        </div>
                        <span class="text-muted"><span id="paymentRef"></span></span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between">
                        <span>Total (USD)</span>
                        <strong id="totalAmount">$37.16</strong>
                    </li>
                </ul>
            
                <form class="card p-2">
                    <div class="input-group">
                        <input type="text" class="form-control" id="promoCode" placeholder="Promo code">
                        <div class="input-group-append">
                            <button type="submit" class="btn btn-secondary">Redeem</button>
                        </div>
                    </div>
                </form>
                <hr class="mb-4"/>
                <button type="button" class="btn btn-success btn-lg btn-block" id="pay">Pay</button> 
            </div>
        </div>
        <footer class="my-5 pt-5 text-muted text-center text-small">
            <p class="mb-1">&copy; 2017-2018 Company Name</p>
            <ul class="list-inline">
                <li class="list-inline-item"><a href="#">Privacy</a></li>
                <li class="list-inline-item"><a href="#">Terms</a></li>
                <li class="list-inline-item"><a href="#">Support</a></li>
            </ul>
        </footer>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="src/jspay.js"></script>
    <script type="text/javascript">
        RDP.modal.init('modal.css3.css');
        let el = id => { return document.getElementById(id) };
        
        el('paymentRef').innerText = "OID" + (new Date()).getTime();
        el('pay').addEventListener('click', function (e) {
            RDP.modal.pay(
                el('paymentRef').innerText,
                'af8fed75-3fc4-49d5-a6bb-59d658f49465', 
                el('totalAmount').innerText.substring(1),
                'SGD',
                { promo: el('promoCode').value }
            )
            .catch(e => {
                console.log(e);
            });
        });
    </script>
  </body>
</html>